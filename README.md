# シフトマッチングシステム

このプロジェクトは、オペレータのシフト割り当てを最適化するためのStreamlitアプリケーションです。

## 機能

- **CSVアップロード**: デスク別の要員数をCSVファイルで指定
- **オペレータ設定**: 各オペレータの勤務時間、所属デスク、対応可能デスクを設定
- **マッチングアルゴリズム**: 
  - DA（Deferred Acceptance）アルゴリズム（推奨）
  - 貪欲アルゴリズム
- **ポイント計算**: 他デスクでの勤務に対するポイント補填
- **CSV出力**: 生成されたシフト表とポイント集計をCSVでダウンロード

## ファイル構成

- `streamlit_shift_matching_demo.py`: メインのStreamlitアプリケーション
- `da_algorithm.py`: DAアルゴリズムの実装
- `シフト表.csv`: サンプルデータ

## DAアルゴリズムについて

DA（Deferred Acceptance）アルゴリズムは、安定マッチングを保証するアルゴリズムです。

### 特徴

1. **安定性**: どのオペレータも、現在の割り当てよりも好ましいデスクに移動できない
2. **公平性**: 所属デスクのオペレータを優先的に割り当て
3. **効率性**: 各時間帯で最適な割り当てを実現

### アルゴリズムの流れ

1. 各時間帯で独立してマッチングを実行
2. オペレータは自分の優先順位に従ってデスクに提案
3. デスクは受け入れ可能なオペレータを優先順位に従って選択
4. 競合が発生した場合、優先度の低いオペレータを除外
5. 全てのオペレータが割り当てられるまで繰り返し

## 使用方法

1. Streamlitアプリを起動:
   ```bash
   streamlit run streamlit_shift_matching_demo.py
   ```

2. デスク要員数のCSVファイルをアップロード（またはテンプレートを使用）

3. オペレータ情報を設定:
   - 名前
   - 勤務時間（開始・終了）
   - 所属デスク
   - 対応可能デスク

4. マッチングアルゴリズムを選択

5. 「Match & Generate Schedule」ボタンをクリック

6. 生成されたシフト表とポイント集計を確認・ダウンロード

## 必要なライブラリ

- streamlit
- pandas
- numpy

## インストール

```bash
pip install streamlit pandas numpy
```

## ライセンス

MIT License 